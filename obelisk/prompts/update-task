---
description: Update existing task based on user feedback
---

**CURRENT STATE: TASK UPDATE**

Modify the frozen task by merging existing state with new requirements.

---

## 1. Input

- `/update-task [description]` → `update_req` = description
- `/update-task` → Ask: "What changes are required?" → Wait → `update_req` = response

**Guard:** If `update_req` is vague (e.g., "make it better", "improve it"):
> "Please specify concrete changes (scope, constraints, or success criteria)."
> → Wait → `update_req` = response

---

## 2. Load & Validate

Read `/obelisk/temp-state/task.md`.

**IF missing:** → Output: "❌ No task to update. Use `/new-task`." → STOP

**IF exists:** Rename to `/obelisk/temp-state/task.md.backup`

---

## 3. Build Refinement Context

Construct internally (do not output):

> **BASE STATE (preserve unless modified):**
> [Content of task.md.backup]
>
> **MODIFICATION REQUEST (wins on conflict):**
> "[update_req]"
>
> **RULES:**
> 1. Apply modification to base state
> 2. Scope removed → remove associated constraints/criteria
> 3. Scope added → imply necessary constraints
> 4. Conflicts resolve in favor of modification

Output confirmation:
> "Updating task: [one-line summary of intended change]. Proceeding..."

---

## 4. Execute Update

**LOAD** `/obelisk/prompts/new-task.md`

**Execution:**
1. **Inject Input:** Pass the **Refinement Prompt** (from Step 2) as the user's input.
2. **Adopt Persona:** Switch immediately to Task Discovery.

**GOAL:** Produce a new `task.md` that is a seamless evolution of the old one.

---

## 5. Cleanup

**On successful task.md creation:** Delete `task.md.backup`

**On failure/abort:** Restore `task.md.backup` → `task.md`